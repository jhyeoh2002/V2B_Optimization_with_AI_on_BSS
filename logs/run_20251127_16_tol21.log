Crash diagnostics ON


==================================================
PART 1: Data preprocess for 2023-01-01 00:00:00 to 2024-09-30 23:00:00...
==================================================

	1.1 Preprocessing radiation data...
		[INFO] Radiation data already exists at './data/timeseries/radiation_data.csv'

	1.2 Preprocessing temperature data...
		[INFO] Temperature data already exists at './data/timeseries/temperature_data.csv'

	1.3 Preprocessing building data...
		[INFO] Building data already exists at './data/timeseries/building_data.csv'

	1.4 Preprocessing electricity cost data...
		[INFO] Electricity cost data already exists at './data/timeseries/electricitycostG2B_data.csv' and './data/timeseries/electricitycostG2V_data.csv'

	1.5 Preprocessing battery demand series data...
		[INFO] Found existing battery data at './data/battery_demand/tol21/resample_full.csv' and './data/battery_demand/tol21/resample_train.csv'

		[INFO] Number of series for clean windows = (168, 37)
		[INFO] Number of eligible series for Case 2 = (1374, 37)
		[INFO] Number of seeds ready for Case 3  = (2000, 36)

		[INFO] Case 1 exists — loaded battery demand from './data/battery_demand/tol21/case1_real_only/battery_demand.npy' with shape (168, 37).
		[INFO] Case 2 exists — loaded battery demand from './data/battery_demand/tol21/case2_nan_filled/battery_demand.npy' with shape (1542, 37).
		[INFO] Case 3 exists — loaded battery demand from './data/battery_demand/tol21/case3_extended_generated/battery_demand.npy' with shape (3542, 37).

	1.6 Generating battery schedule...
		[INFO] Case 1 exists — loaded from './data/battery_demand/tol21/case1_real_only/battery_availability.npy' and './data/battery_demand/tol21/case1_real_only/battery_details.npy' shape (168, 263, 36) and (4, 168, 263)
		[INFO] Case 2 exists — loaded from './data/battery_demand/tol21/case2_nan_filled/battery_availability.npy' and './data/battery_demand/tol21/case2_nan_filled/battery_details.npy' shape (1542, 311, 36) and (4, 1542, 311)
		[INFO] Case 3 exists — loaded from './data/battery_demand/tol21/case3_extended_generated/battery_availability.npy' and './data/battery_demand/tol21/case3_extended_generated/battery_details.npy' shape (3542, 422, 36) and (4, 3542, 422)


==================================================
PART 2: MILP Optimization...
==================================================

	2.1 Optimizing Case 1...
		[INFO] Loaded 168 samples from './data/battery_demand/tol21/case1_real_only'
		[INFO] Results already exist at './data/optimization_results/tol21/case1_real_only/optimization/V2B.npy'. Skipping optimization run.
		[INFO] Results already exist at './data/optimization_results/tol21/case1_real_only/immediate_charging/V2B.npy'. Skipping immediate_charging run.
		[INFO] Case 1 completed.

	2.2 Optimizing Case 2...
		[INFO] Loaded 1542 samples from './data/battery_demand/tol21/case2_nan_filled'
		[INFO] Results already exist at './data/optimization_results/tol21/case2_nan_filled/optimization/V2B.npy'. Skipping optimization run.
		[INFO] Results already exist at './data/optimization_results/tol21/case2_nan_filled/immediate_charging/V2B.npy'. Skipping immediate_charging run.
		[INFO] Case 2 completed.

	2.3 Optimizing Case 3...
		[INFO] Loaded 3542 samples from './data/battery_demand/tol21/case3_extended_generated'
		[INFO] Results already exist at './data/optimization_results/tol21/case3_extended_generated/optimization/V2B.npy'. Skipping optimization run.
		[INFO] Found checkpoint: './data/optimization_results/tol21/case3_extended_generated/immediate_charging_checkpoint.npz'
		[INFO] Resuming from iteration 2520
		[INFO] Processing immediate_charging series:   0%|                   | 0/1022 [00:00<?, ?series/s]		[INFO] Processing immediate_charging series:   1%|          | 10/1022 [00:05<09:38,  1.75series/s]		[INFO] Processing immediate_charging series:   2%|▏         | 20/1022 [00:11<09:28,  1.76series/s]		[INFO] Processing immediate_charging series:   3%|▎         | 30/1022 [00:17<09:26,  1.75series/s]		[INFO] Processing immediate_charging series:   4%|▍         | 40/1022 [00:22<09:20,  1.75series/s]		[INFO] Processing immediate_charging series:   5%|▍         | 50/1022 [00:28<09:17,  1.74series/s]		[INFO] Processing immediate_charging series:   6%|▌         | 60/1022 [00:34<09:11,  1.74series/s]		[INFO] Processing immediate_charging series:   7%|▋         | 70/1022 [00:40<09:04,  1.75series/s]		[INFO] Processing immediate_charging series:   8%|▊         | 80/1022 [00:45<09:02,  1.74series/s]		[INFO] Processing immediate_charging series:   9%|▉         | 90/1022 [00:51<08:57,  1.73series/s]		[INFO] Processing immediate_charging series:  10%|▉        | 100/1022 [00:57<08:52,  1.73series/s]		[INFO] Processing immediate_charging series:  11%|▉        | 110/1022 [01:03<08:49,  1.72series/s]		[INFO] Processing immediate_charging series:  12%|█        | 120/1022 [01:09<08:43,  1.72series/s]		[INFO] Processing immediate_charging series:  13%|█▏       | 130/1022 [01:15<08:40,  1.71series/s]		[INFO] Processing immediate_charging series:  14%|█▏       | 140/1022 [01:20<08:35,  1.71series/s]		[INFO] Processing immediate_charging series:  15%|█▎       | 150/1022 [01:26<08:30,  1.71series/s]		[INFO] Processing immediate_charging series:  16%|█▍       | 160/1022 [01:32<08:25,  1.70series/s]		[INFO] Processing immediate_charging series:  17%|█▍       | 170/1022 [01:38<08:19,  1.71series/s]		[INFO] Processing immediate_charging series:  18%|█▌       | 180/1022 [01:44<08:18,  1.69series/s]		[INFO] Processing immediate_charging series:  19%|█▋       | 190/1022 [01:50<08:14,  1.68series/s]		[INFO] Processing immediate_charging series:  20%|█▊       | 200/1022 [01:56<08:14,  1.66series/s]		[INFO] Processing immediate_charging series:  21%|█▊       | 210/1022 [02:02<08:08,  1.66series/s]		[INFO] Processing immediate_charging series:  22%|█▉       | 220/1022 [02:08<08:01,  1.67series/s]		[INFO] Processing immediate_charging series:  23%|██       | 230/1022 [02:14<07:55,  1.67series/s]		[INFO] Processing immediate_charging series:  23%|██       | 240/1022 [02:20<07:50,  1.66series/s]		[INFO] Processing immediate_charging series:  24%|██▏      | 250/1022 [02:26<07:48,  1.65series/s]		[INFO] Processing immediate_charging series:  25%|██▎      | 260/1022 [02:33<07:44,  1.64series/s]		[INFO] Processing immediate_charging series:  26%|██▍      | 270/1022 [02:39<07:41,  1.63series/s]		[INFO] Processing immediate_charging series:  27%|██▍      | 280/1022 [02:46<07:52,  1.57series/s]		[INFO] Processing immediate_charging series:  28%|██▌      | 290/1022 [02:52<07:42,  1.58series/s]		[INFO] Processing immediate_charging series:  29%|██▋      | 300/1022 [02:58<07:34,  1.59series/s]		[INFO] Processing immediate_charging series:  30%|██▋      | 310/1022 [03:05<07:28,  1.59series/s]		[INFO] Processing immediate_charging series:  31%|██▊      | 320/1022 [03:11<07:19,  1.60series/s]		[INFO] Processing immediate_charging series:  32%|██▉      | 330/1022 [03:17<07:16,  1.59series/s]		[INFO] Processing immediate_charging series:  33%|██▉      | 340/1022 [03:23<07:08,  1.59series/s]		[INFO] Processing immediate_charging series:  34%|███      | 350/1022 [03:30<07:00,  1.60series/s]		[INFO] Processing immediate_charging series:  35%|███▏     | 360/1022 [03:36<06:53,  1.60series/s]		[INFO] Processing immediate_charging series:  36%|███▎     | 370/1022 [03:42<06:45,  1.61series/s]		[INFO] Processing immediate_charging series:  37%|███▎     | 380/1022 [03:48<06:39,  1.61series/s]		[INFO] Processing immediate_charging series:  38%|███▍     | 390/1022 [03:54<06:32,  1.61series/s]		[INFO] Processing immediate_charging series:  39%|███▌     | 400/1022 [04:01<06:27,  1.60series/s]		[INFO] Processing immediate_charging series:  40%|███▌     | 410/1022 [04:07<06:23,  1.60series/s]		[INFO] Processing immediate_charging series:  41%|███▋     | 420/1022 [04:13<06:16,  1.60series/s]		[INFO] Processing immediate_charging series:  42%|███▊     | 430/1022 [04:20<06:13,  1.59series/s]		[INFO] Processing immediate_charging series:  43%|███▊     | 440/1022 [04:28<06:50,  1.42series/s]		[INFO] Processing immediate_charging series:  44%|███▉     | 450/1022 [04:35<06:29,  1.47series/s]		[INFO] Processing immediate_charging series:  45%|████     | 460/1022 [04:41<06:14,  1.50series/s]		[INFO] Processing immediate_charging series:  46%|████▏    | 470/1022 [04:47<06:03,  1.52series/s]		[INFO] Processing immediate_charging series:  47%|████▏    | 480/1022 [04:54<05:53,  1.53series/s]		[INFO] Processing immediate_charging series:  48%|████▎    | 490/1022 [05:00<05:45,  1.54series/s]		[INFO] Processing immediate_charging series:  49%|████▍    | 500/1022 [05:07<05:39,  1.54series/s]		[INFO] Processing immediate_charging series:  50%|████▍    | 510/1022 [05:13<05:33,  1.53series/s]		[INFO] Processing immediate_charging series:  51%|████▌    | 520/1022 [05:20<05:25,  1.54series/s]		[INFO] Processing immediate_charging series:  52%|████▋    | 530/1022 [05:26<05:18,  1.54series/s]		[INFO] Processing immediate_charging series:  53%|████▊    | 540/1022 [05:33<05:12,  1.54series/s]		[INFO] Processing immediate_charging series:  54%|████▊    | 550/1022 [05:39<05:05,  1.54series/s]		[INFO] Processing immediate_charging series:  55%|████▉    | 560/1022 [05:46<04:59,  1.54series/s]		[INFO] Processing immediate_charging series:  56%|█████    | 570/1022 [05:52<04:52,  1.55series/s]		[INFO] Processing immediate_charging series:  57%|█████    | 580/1022 [05:59<04:46,  1.54series/s]		[INFO] Processing immediate_charging series:  58%|█████▏   | 590/1022 [06:05<04:40,  1.54series/s]		[INFO] Processing immediate_charging series:  59%|█████▎   | 600/1022 [06:12<04:34,  1.54series/s]		[INFO] Processing immediate_charging series:  60%|█████▎   | 610/1022 [06:18<04:29,  1.53series/s]		[INFO] Processing immediate_charging series:  61%|█████▍   | 620/1022 [06:25<04:23,  1.53series/s]		[INFO] Processing immediate_charging series:  62%|█████▌   | 630/1022 [06:31<04:16,  1.53series/s]		[INFO] Processing immediate_charging series:  63%|█████▋   | 640/1022 [06:38<04:11,  1.52series/s]		[INFO] Processing immediate_charging series:  64%|█████▋   | 650/1022 [06:45<04:06,  1.51series/s]		[INFO] Processing immediate_charging series:  65%|█████▊   | 660/1022 [06:51<03:58,  1.52series/s]		[INFO] Processing immediate_charging series:  66%|█████▉   | 670/1022 [06:58<03:54,  1.50series/s]		[INFO] Processing immediate_charging series:  67%|█████▉   | 680/1022 [07:05<03:46,  1.51series/s]		[INFO] Processing immediate_charging series:  68%|██████   | 690/1022 [07:11<03:40,  1.50series/s]		[INFO] Processing immediate_charging series:  68%|██████▏  | 700/1022 [07:18<03:34,  1.50series/s]		[INFO] Processing immediate_charging series:  69%|██████▎  | 710/1022 [07:25<03:28,  1.50series/s]		[INFO] Processing immediate_charging series:  70%|██████▎  | 720/1022 [07:31<03:21,  1.50series/s]		[INFO] Processing immediate_charging series:  71%|██████▍  | 730/1022 [07:38<03:14,  1.50series/s]		[INFO] Processing immediate_charging series:  72%|██████▌  | 740/1022 [07:45<03:09,  1.49series/s]		[INFO] Processing immediate_charging series:  73%|██████▌  | 750/1022 [07:52<03:02,  1.49series/s]		[INFO] Processing immediate_charging series:  74%|██████▋  | 760/1022 [07:58<02:57,  1.48series/s]		[INFO] Processing immediate_charging series:  75%|██████▊  | 770/1022 [08:05<02:50,  1.48series/s]		[INFO] Processing immediate_charging series:  76%|██████▊  | 780/1022 [08:12<02:44,  1.47series/s]		[INFO] Processing immediate_charging series:  77%|██████▉  | 790/1022 [08:19<02:37,  1.47series/s]		[INFO] Processing immediate_charging series:  78%|███████  | 800/1022 [08:26<02:30,  1.47series/s]		[INFO] Processing immediate_charging series:  79%|███████▏ | 810/1022 [08:33<02:24,  1.47series/s]		[INFO] Processing immediate_charging series:  80%|███████▏ | 820/1022 [08:39<02:17,  1.47series/s]		[INFO] Processing immediate_charging series:  81%|███████▎ | 830/1022 [08:46<02:11,  1.46series/s]		[INFO] Processing immediate_charging series:  82%|███████▍ | 840/1022 [08:53<02:04,  1.46series/s]		[INFO] Processing immediate_charging series:  83%|███████▍ | 850/1022 [09:00<01:58,  1.46series/s]		[INFO] Processing immediate_charging series:  84%|███████▌ | 860/1022 [09:07<01:51,  1.45series/s]		[INFO] Processing immediate_charging series:  85%|███████▋ | 870/1022 [09:14<01:44,  1.45series/s]		[INFO] Processing immediate_charging series:  86%|███████▋ | 880/1022 [09:21<01:38,  1.45series/s]		[INFO] Processing immediate_charging series:  87%|███████▊ | 890/1022 [09:28<01:31,  1.44series/s]		[INFO] Processing immediate_charging series:  88%|███████▉ | 900/1022 [09:35<01:25,  1.43series/s]		[INFO] Processing immediate_charging series:  89%|████████ | 910/1022 [09:42<01:18,  1.43series/s]		[INFO] Processing immediate_charging series:  90%|████████ | 920/1022 [09:49<01:11,  1.43series/s]		[INFO] Processing immediate_charging series:  91%|████████▏| 930/1022 [09:56<01:04,  1.43series/s]		[INFO] Processing immediate_charging series:  92%|████████▎| 940/1022 [10:03<00:57,  1.42series/s]		[INFO] Processing immediate_charging series:  93%|████████▎| 950/1022 [10:10<00:50,  1.42series/s]		[INFO] Processing immediate_charging series:  94%|████████▍| 960/1022 [10:17<00:43,  1.42series/s]		[INFO] Processing immediate_charging series:  95%|████████▌| 970/1022 [10:24<00:36,  1.42series/s]		[INFO] Processing immediate_charging series:  96%|████████▋| 980/1022 [10:31<00:29,  1.42series/s]		[INFO] Processing immediate_charging series:  97%|████████▋| 990/1022 [10:39<00:22,  1.41series/s]		[INFO] Processing immediate_charging series:  98%|███████▊| 1000/1022 [10:46<00:15,  1.41series/s]		[INFO] Processing immediate_charging series:  99%|███████▉| 1010/1022 [10:53<00:08,  1.41series/s]		[INFO] Processing immediate_charging series: 100%|███████▉| 1020/1022 [11:00<00:01,  1.41series/s]		[INFO] Processing immediate_charging series: 100%|████████| 1022/1022 [11:07<00:00,  1.06series/s]		[INFO] Processing immediate_charging series: 100%|████████| 1022/1022 [11:07<00:00,  1.53series/s]
		[INFO] Saving grid_demand results...
		[INFO] Saving pv_loss results...
		[INFO] Saving initial_demand results...
		[INFO] Saving charging_demand results...
		[INFO] Saving G2B results...
		[INFO] Saving P2B results...
		[INFO] Saving G2V results...
		[INFO] Saving P2V results...
		[INFO] Saving V2B results...
		[INFO] Saving SOC results...
		[INFO] Saving unmet results...
		[INFO] Saving objective_value results...
		[INFO] Saving optimization_time_s results...
		[INFO] Saving mip_gap_percent results...
		[INFO] Saving total_cost results...
		[INFO] Saving self_sufficiency results...
		[INFO] Saving pv_utilization results...
		[INFO] Deleted checkpoint after full completion.
		[INFO] Case 3 completed.
